<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Howtrump by 3w-studio</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Howtrump</h1>
      <h2 class="project-tagline">Wordcloud about #Trump 16/04/25—16/05/04 with data from Weibo and Twitter. </h2>
      <a href="https://github.com/3w-studio/howTrump" class="btn">View on GitHub</a>
      <a href="https://github.com/3w-studio/howTrump/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/3w-studio/howTrump/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="howtrump" class="anchor" href="#howtrump" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>howTrump</h1>

<p>Wordcloud about #Trump 16/04/25—16/05/04 with data from Weibo and Twitter. </p>

<p>This HTML site intends to visualize the use of #Trump from 16/04/25 to 16/05/04 on Weibo and Twitter. It takes data from  »data.js«, generates all words in the arrays allDays and allDaysCN. Then it assigns a font-size to each word according to the count of occurence in posts. This data is stored in the array days/daysCN. To allow more universal use some tings could still be simplyfied. For example there shouldn't be two functions in parallel for English and Chinese.</p>

<div class="highlight highlight-source-js"><pre>
<span class="pl-c">// Genereate the English words</span>
<span class="pl-k">var</span> init <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>;
<span class="pl-k">for</span> (k <span class="pl-k">=</span> <span class="pl-c1">0</span>; k <span class="pl-k">&lt;</span> <span class="pl-smi">allDays</span>.<span class="pl-c1">length</span>; k<span class="pl-k">++</span>) { 
    init <span class="pl-k">+=</span> <span class="pl-s"><span class="pl-pds">"</span>&lt;div&gt;&lt;span&gt;<span class="pl-pds">"</span></span> <span class="pl-k">+</span> allDays[k][<span class="pl-c1">0</span>] <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>&lt;/span&gt;&lt;/div&gt;<span class="pl-pds">"</span></span>;
}

<span class="pl-c">// Genereate the Chinese words</span>
<span class="pl-k">var</span> initCN <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>;
<span class="pl-k">for</span> (i <span class="pl-k">=</span> <span class="pl-c1">0</span>; i <span class="pl-k">&lt;</span> <span class="pl-smi">allDaysCN</span>.<span class="pl-c1">length</span>; i<span class="pl-k">++</span>) { 
    initCN <span class="pl-k">+=</span> <span class="pl-s"><span class="pl-pds">"</span>&lt;div&gt;&lt;span&gt;<span class="pl-pds">"</span></span> <span class="pl-k">+</span> allDaysCN[i][<span class="pl-c1">0</span>] <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>&lt;/span&gt;&lt;/div&gt;<span class="pl-pds">"</span></span>;
}

<span class="pl-en">$</span>(<span class="pl-c1">document</span>).<span class="pl-en">ready</span>(<span class="pl-k">function</span>(){

    <span class="pl-k">function</span> <span class="pl-en">newHTML</span>(<span class="pl-smi">k</span>) {

      <span class="pl-c">// Hide all words in the beginning of the loop. </span>
        <span class="pl-en">$</span>(<span class="pl-s"><span class="pl-pds">'</span>.container &gt; div<span class="pl-pds">'</span></span>).<span class="pl-en">addClass</span>(<span class="pl-s"><span class="pl-pds">'</span>inAct<span class="pl-pds">'</span></span>);
        <span class="pl-k">for</span> (j <span class="pl-k">=</span> <span class="pl-c1">0</span>; j <span class="pl-k">&lt;</span> days[k].<span class="pl-c1">length</span>; j<span class="pl-k">++</span>) { 

          <span class="pl-c">// Iterate through the words and see which one matches to the dataset given for a particular day</span>
            <span class="pl-en">$</span>(<span class="pl-s"><span class="pl-pds">'</span>.container &gt; div<span class="pl-pds">'</span></span>).<span class="pl-en">each</span>(<span class="pl-k">function</span>(){
                <span class="pl-k">if</span>(<span class="pl-en">$</span>(<span class="pl-v">this</span>).<span class="pl-en">children</span>(<span class="pl-s"><span class="pl-pds">'</span>span<span class="pl-pds">'</span></span>).<span class="pl-en">html</span>() <span class="pl-k">===</span> days[k][j][<span class="pl-c1">0</span>]) {

                  <span class="pl-c">//If the current word occured on that day remove the class that hides it and increase the font-size according to the word count (Factor is .7, works fine to fit in 13" screens)</span>
                    <span class="pl-en">$</span>(<span class="pl-v">this</span>).<span class="pl-en">removeClass</span>(<span class="pl-s"><span class="pl-pds">'</span>inAct<span class="pl-pds">'</span></span>).<span class="pl-en">children</span>().<span class="pl-en">css</span>(<span class="pl-s"><span class="pl-pds">"</span>font-size<span class="pl-pds">"</span></span>,<span class="pl-c1">14</span><span class="pl-k">+</span>days[k][j][<span class="pl-c1">1</span>]<span class="pl-k">*</span><span class="pl-c1">.7</span>).<span class="pl-en">css</span>(<span class="pl-s"><span class="pl-pds">"</span>width<span class="pl-pds">"</span></span>,days[k][j][<span class="pl-c1">1</span>]<span class="pl-k">*</span><span class="pl-c1">1.5</span> <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>px<span class="pl-pds">"</span></span>);
                }
            });
        }

        <span class="pl-c">// after the words have their size we use jquery.masonry by David Desandro to layout the output.</span>
        <span class="pl-en">$</span>(<span class="pl-s"><span class="pl-pds">'</span>.container<span class="pl-pds">'</span></span>).<span class="pl-en">masonry</span>({
            itemSelector<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>div<span class="pl-pds">'</span></span>,
            columnWidth<span class="pl-k">:</span> <span class="pl-c1">1</span>
        });
        newDay <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>;
    }

    <span class="pl-c">// Same thing for Chinese, should be unified one day.</span>
    <span class="pl-k">function</span> <span class="pl-en">newHTMLCN</span>(<span class="pl-smi">i</span>) {
        <span class="pl-en">$</span>(<span class="pl-s"><span class="pl-pds">'</span>.containerCN &gt; div<span class="pl-pds">'</span></span>).<span class="pl-en">addClass</span>(<span class="pl-s"><span class="pl-pds">'</span>inAct<span class="pl-pds">'</span></span>);
        <span class="pl-k">for</span> (j <span class="pl-k">=</span> <span class="pl-c1">0</span>; j <span class="pl-k">&lt;</span> daysCN[i].<span class="pl-c1">length</span>; j<span class="pl-k">++</span>) { 
            <span class="pl-en">$</span>(<span class="pl-s"><span class="pl-pds">'</span>.containerCN &gt; div<span class="pl-pds">'</span></span>).<span class="pl-en">each</span>(<span class="pl-k">function</span>(){
                <span class="pl-k">if</span>(<span class="pl-en">$</span>(<span class="pl-v">this</span>).<span class="pl-en">children</span>(<span class="pl-s"><span class="pl-pds">'</span>span<span class="pl-pds">'</span></span>).<span class="pl-en">html</span>() <span class="pl-k">===</span> daysCN[i][j][<span class="pl-c1">0</span>]) {
                    <span class="pl-en">$</span>(<span class="pl-v">this</span>).<span class="pl-en">removeClass</span>(<span class="pl-s"><span class="pl-pds">'</span>inAct<span class="pl-pds">'</span></span>).<span class="pl-en">children</span>().<span class="pl-en">css</span>(<span class="pl-s"><span class="pl-pds">"</span>font-size<span class="pl-pds">"</span></span>,<span class="pl-c1">14</span><span class="pl-k">+</span>daysCN[i][j][<span class="pl-c1">1</span>]<span class="pl-k">*</span><span class="pl-c1">.7</span>).<span class="pl-en">css</span>(<span class="pl-s"><span class="pl-pds">"</span>width<span class="pl-pds">"</span></span>,daysCN[i][j][<span class="pl-c1">1</span>]<span class="pl-k">*</span><span class="pl-c1">1.5</span> <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>px<span class="pl-pds">"</span></span>);
                }
            });
        }
        <span class="pl-en">$</span>(<span class="pl-s"><span class="pl-pds">'</span>.containerCN<span class="pl-pds">'</span></span>).<span class="pl-en">masonry</span>({
            itemSelector<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>div<span class="pl-pds">'</span></span>,
            columnWidth<span class="pl-k">:</span> <span class="pl-c1">1</span>
        });
        newDayCN <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>;
    }

  <span class="pl-c">//Run the loop, reset counter if the itereation reaches the end.</span>
    <span class="pl-k">function</span> <span class="pl-en">myLoop</span> () { 
        <span class="pl-c1">setTimeout</span>(<span class="pl-k">function</span> () {    
           <span class="pl-en">newHTML</span>(k);

           <span class="pl-c">//Update the date top right from array "dates"</span>
           <span class="pl-en">$</span>(<span class="pl-s"><span class="pl-pds">'</span>h1.day<span class="pl-pds">'</span></span>).<span class="pl-en">html</span>(<span class="pl-s"><span class="pl-pds">"</span>Day: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> dates[k]); 
           k<span class="pl-k">++</span>; 
           <span class="pl-k">if</span> (k <span class="pl-k">&lt;</span> <span class="pl-smi">days</span>.<span class="pl-c1">length</span>) {      
              <span class="pl-en">myLoop</span>();            
           }
           <span class="pl-k">if</span> (k <span class="pl-k">==</span> <span class="pl-smi">days</span>.<span class="pl-c1">length</span>) {      
              k <span class="pl-k">=</span> <span class="pl-c1">0</span>;   
              <span class="pl-en">myLoop</span>();          
           }
        }, <span class="pl-c1">800</span>);
    }

    <span class="pl-en">$</span>(<span class="pl-s"><span class="pl-pds">'</span>.container<span class="pl-pds">'</span></span>).<span class="pl-en">html</span>(init);
    <span class="pl-k">var</span> k <span class="pl-k">=</span> <span class="pl-c1">0</span>;                     

    <span class="pl-en">myLoop</span>();
    <span class="pl-k">var</span> newDay <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>; 

    <span class="pl-k">function</span> <span class="pl-en">myLoopCN</span> () { 
        <span class="pl-c1">setTimeout</span>(<span class="pl-k">function</span> () {    
           <span class="pl-en">newHTMLCN</span>(i);  
           i<span class="pl-k">++</span>; 

           <span class="pl-k">if</span> (i <span class="pl-k">&lt;</span> <span class="pl-smi">daysCN</span>.<span class="pl-c1">length</span>) {      
              <span class="pl-en">myLoopCN</span>();            
           }
           <span class="pl-k">if</span> (i <span class="pl-k">==</span> <span class="pl-smi">daysCN</span>.<span class="pl-c1">length</span>) {      
              i <span class="pl-k">=</span> <span class="pl-c1">0</span>;   
              <span class="pl-en">myLoopCN</span>();          
           }
        }, <span class="pl-c1">800</span>);
    }

    <span class="pl-en">$</span>(<span class="pl-s"><span class="pl-pds">'</span>.containerCN<span class="pl-pds">'</span></span>).<span class="pl-en">html</span>(initCN);
    <span class="pl-k">var</span> i <span class="pl-k">=</span> <span class="pl-c1">0</span>;                     

    <span class="pl-en">myLoopCN</span>();
    <span class="pl-k">var</span> newDayCN <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>; 
});</pre></div>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/3w-studio/howTrump">Howtrump</a> is maintained by <a href="https://github.com/3w-studio">3w-studio</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
